<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PinjamLab - Peminjaman Laboratorium</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js for Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://cdn.jsdelivr.net/npm/lucide-static@latest/dist/lucide.js"></script>

    <!-- Konfigurasi Tailwind untuk tema baru -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#007AFF',
                        'background': '#F8F9FA',
                        'surface': '#FFFFFF',
                        'text-main': '#212529',
                        'text-subtle': '#6C757D',
                        'success': '#198754',
                        'warning': '#FFC107',
                        'error': '#DC3545',
                    }
                }
            }
        }
    </script>

    <!-- CSS Kustom Minimal -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .view { display: none; }
        .view.active { display: block; }
        .bottom-nav-item.active, .operator-nav-item.active { color: #007AFF; } /* Primary */
        .filter-day.active { background-color: #007AFF; color: white; } /* Primary */
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #007AFF; /* Primary */
            animation: spin 1s ease infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .table-container::-webkit-scrollbar { height: 8px; }
        .table-container::-webkit-scrollbar-track { background: #f1f1f1; }
        .table-container::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        .table-container::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        i-lucide { color: currentColor; }
        .modal-content-host { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-background text-text-main">

    <!-- Banner Notifikasi Global -->
    <div id="notification-banner" style="display: none; transform: translateX(-50%);" class="fixed top-5 left-1/2 z-[999] text-white py-2 px-5 rounded-lg shadow-xl transition-transform duration-300">
        <span></span>
    </div>

    <!-- Kontainer Aplikasi Utama -->
    <div id="app" class="max-w-md mx-auto bg-surface min-h-screen">

        <!-- ===== VIEW: LOGIN ===== -->
        <div id="login-view" class="view active p-6">
            <div class="flex flex-col items-center justify-center min-h-screen">
                <div class="w-full">
                    <div class="text-center mb-10">
                        <i-lucide name="notebook-pen" class="mx-auto text-primary mb-3 w-14 h-14"></i-lucide>
                        <h1 class="text-4xl font-bold text-primary">PinjamLab</h1>
                        <p class="text-text-subtle mt-1">Selamat datang kembali!</p>
                    </div>
                    <div id="success-message" class="hidden mb-4 text-center p-3 bg-success/10 text-success rounded-lg border border-success/20"></div>
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="login-user-type" class="block text-sm font-medium text-text-subtle">Jenis User</label>
                            <select id="login-user-type" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
                                <option>Mahasiswa</option>
                                <option>Dosen</option>
                                <option>Operator</option>
                            </select>
                        </div>
                        <div>
                            <label for="login-id" class="block text-sm font-medium text-text-subtle">NIM / NIP / Username</label>
                            <input type="text" id="login-id" placeholder="Masukkan ID Anda" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <div>
                            <label for="login-password" class="block text-sm font-medium text-text-subtle">Password</label>
                            <input type="password" id="login-password" placeholder="••••••••" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <button type="submit" class="w-full bg-primary text-white font-bold py-3 px-4 rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-150 ease-in-out transform hover:scale-105 shadow-lg shadow-primary/20">
                            Login
                        </button>
                    </form>
                    <p class="text-center text-sm text-text-subtle mt-6">
                        Belum punya akun? <a href="#" id="go-to-register" class="font-medium text-primary hover:text-primary/80">Register di sini</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- ===== VIEW: REGISTER ===== -->
        <div id="register-view" class="view p-6">
            <div class="flex flex-col items-center justify-center min-h-screen">
                 <div class="w-full">
                    <div class="text-center mb-10">
                        <h1 class="text-3xl font-bold text-text-main">Buat Akun Baru</h1>
                        <p class="text-text-subtle">Isi data diri Anda dengan benar</p>
                    </div>
                    <form id="register-form" class="space-y-4">
                        <div>
                            <label for="register-user-type" class="block text-sm font-medium text-text-subtle">Pilih Jenis User</label>
                            <select id="register-user-type" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
                                <option>Mahasiswa</option>
                                <option>Dosen</option>
                                <option>Operator</option>
                            </select>
                        </div>
                        <div>
                            <label for="register-name" class="block text-sm font-medium text-text-subtle">Nama Lengkap</label>
                            <input type="text" id="register-name" placeholder="Contoh: Budi Santoso" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <div>
                            <label for="register-id" class="block text-sm font-medium text-text-subtle">NIM / NIP</label>
                            <input type="text" id="register-id" placeholder="Masukkan NIM atau NIP" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <div>
                            <label for="register-password" class="block text-sm font-medium text-text-subtle">Password</label>
                            <input type="password" id="register-password" placeholder="Buat password" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <div>
                            <label for="register-password-verify" class="block text-sm font-medium text-text-subtle">Verifikasi Ulang Password</label>
                            <input type="password" id="register-password-verify" placeholder="Ketik ulang password" class="mt-1 block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm placeholder:text-gray-400">
                        </div>
                        <button type="submit" class="w-full bg-primary text-white font-bold py-3 px-4 rounded-md hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-all duration-150 ease-in-out transform hover:scale-105">
                            Register
                        </button>
                    </form>
                     <p class="text-center text-sm text-text-subtle mt-6">
                        Sudah punya akun? <a href="#" id="go-to-login" class="font-medium text-primary hover:text-primary/80">Login di sini</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- ===== MAIN APP (MAHASISWA/DOSEN) ===== -->
        <div id="main-app-view" class="view bg-background">
            <main id="main-content" class="pb-24"></main>
            <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-surface border-t border-gray-200">
                <div class="flex justify-around">
                    <a href="#beranda" class="bottom-nav-item flex-1 text-center py-3 text-sm text-text-subtle transition-colors duration-200 active"><i-lucide name="home" class="mx-auto w-6 h-6 mb-1"></i-lucide><span class="font-medium">Beranda</span></a>
                    <a href="#jadwal" class="bottom-nav-item flex-1 text-center py-3 text-sm text-text-subtle transition-colors duration-200"><i-lucide name="calendar-days" class="mx-auto w-6 h-6 mb-1"></i-lucide><span class="font-medium">Jadwal</span></a>
                    <a href="#info" class="bottom-nav-item flex-1 text-center py-3 text-sm text-text-subtle transition-colors duration-200"><i-lucide name="school" class="mx-auto w-6 h-6 mb-1"></i-lucide><span class="font-medium">Info Lab</span></a>
                    <a href="#akun" class="bottom-nav-item flex-1 text-center py-3 text-sm text-text-subtle transition-colors duration-200"><i-lucide name="user" class="mx-auto w-6 h-6 mb-1"></i-lucide><span class="font-medium">Akun</span></a>
                </div>
            </nav>
        </div>

        <!-- ===== OPERATOR VIEW ===== -->
        <div id="operator-view" class="view bg-background">
            <main id="operator-content" class="pb-24"></main>
            <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-surface border-t border-gray-200">
                <div class="flex justify-around">
                    <a href="#dashboard" class="operator-nav-item flex-1 text-center py-2 text-xs text-text-subtle transition-colors duration-200 active"><i-lucide name="layout-dashboard" class="mx-auto w-5 h-5 mb-1"></i-lucide><span>Dashboard</span></a>
                    <a href="#peminjaman" class="operator-nav-item flex-1 text-center py-2 text-xs text-text-subtle transition-colors duration-200"><i-lucide name="book-check" class="mx-auto w-5 h-5 mb-1"></i-lucide><span>Peminjaman</span></a>
                    <a href="#inventaris" class="operator-nav-item flex-1 text-center py-2 text-xs text-text-subtle transition-colors duration-200"><i-lucide name="archive" class="mx-auto w-5 h-5 mb-1"></i-lucide><span>Inventaris</span></a>
                    <a href="#laporan" class="operator-nav-item flex-1 text-center py-2 text-xs text-text-subtle transition-colors duration-200"><i-lucide name="wrench" class="mx-auto w-5 h-5 mb-1"></i-lucide><span>Laporan</span></a>
                    <a href="#akun-operator" class="operator-nav-item flex-1 text-center py-2 text-xs text-text-subtle transition-colors duration-200"><i-lucide name="user-cog" class="mx-auto w-5 h-5 mb-1"></i-lucide><span>Akun</span></a>
                </div>
            </nav>
        </div>
    </div>

    <!-- ======================================================= -->
    <!-- TEMPLATES PENGGUNA -->
    <!-- ======================================================= -->
    <template id="beranda-template">
        <div class="p-4 space-y-6">
            <header><h1 class="text-3xl font-bold text-text-main">Selamat Datang, Budi!</h1><p class="text-text-subtle">Siap untuk produktif hari ini?</p></header>
            <div class="bg-primary text-white p-6 rounded-2xl shadow-lg shadow-primary/20"><h2 class="text-xl font-bold mb-2">Peminjaman Laboratorium</h2><p class="mb-4 opacity-90">Butuh lab di luar jadwal? Pinjam lab dengan mudah dan cepat.</p><button id="show-pinjam-form" class="w-full bg-white text-primary font-bold py-3 px-4 rounded-lg hover:bg-gray-100 transition transform hover:scale-105">Pinjam Lab Sekarang</button></div>
            <div>
                <h3 class="text-lg font-semibold text-text-main mb-3">Jadwal Anda Hari Ini</h3>
                <div id="jadwal-hari-ini-container" class="space-y-3">
                    <!-- Pengingat jadwal akan di-render di sini oleh JS -->
                </div>
            </div>
        </div>
    </template>
    <template id="jadwal-template">
        <div class="p-4"><header class="mb-6"><h1 class="text-3xl font-bold text-text-main">Jadwal Laboratorium</h1><p class="text-text-subtle">Lihat jadwal penggunaan lab per hari.</p></header><div class="mb-4"><label for="lab-choice-user" class="block text-sm font-medium text-text-subtle mb-1">Pilih Laboratorium</label><select id="lab-choice-user" class="block w-full px-3 py-2 bg-surface border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"><option>Lab Pemrograman Dasar 1</option><option>Lab Multimedia</option><option>Lab Mandiri</option><option>Lab Server</option></select></div><div class="mb-4"><div id="day-filter-container-user" class="flex justify-between items-center bg-gray-100 rounded-lg p-1"><button class="filter-day flex-1 py-2 text-sm text-text-subtle rounded-md transition-colors active" data-day="Senin">Sen</button><button class="filter-day flex-1 py-2 text-sm text-text-subtle rounded-md transition-colors" data-day="Selasa">Sel</button><button class="filter-day flex-1 py-2 text-sm text-text-subtle rounded-md transition-colors" data-day="Rabu">Rab</button><button class="filter-day flex-1 py-2 text-sm text-text-subtle rounded-md transition-colors" data-day="Kamis">Kam</button><button class="filter-day flex-1 py-2 text-sm text-text-subtle rounded-md transition-colors" data-day="Jumat">Jum</button></div></div><div><h3 id="schedule-day-title" class="text-lg font-semibold text-text-main mb-3">Senin</h3><div id="schedule-timeline" class="space-y-4"></div></div></div>
    </template>
    <template id="info-template">
        <div class="p-4"><header class="mb-6"><h1 class="text-3xl font-bold text-text-main">Informasi Lab</h1><p class="text-text-subtle">Detail fasilitas, peraturan, dan kondisi lab.</p></header><div id="info-lab-accordion" class="space-y-3"><div class="bg-surface rounded-lg border border-gray-200"><button class="accordion-header w-full flex justify-between items-center p-4 text-left font-semibold text-text-main"><span>Lab Pemrograman Dasar 1</span><i-lucide name="chevron-down" class="w-5 h-5 transition-transform"></i-lucide></button><div class="accordion-content"><div class="px-4 pb-4 text-text-subtle space-y-4 border-t border-gray-200"><div class="pt-4"><h4 class="font-semibold text-text-main">Lokasi</h4><p>Gedung A, Lantai 2</p></div><div><h4 class="font-semibold text-text-main">Inventaris</h4><ul class="list-disc list-inside text-sm pl-2 space-y-1"><li>Jumlah Komputer: 30 Unit</li><li>Jenis: PC All-in-One</li><li>Spesifikasi: Core i5, 8GB RAM, 256GB SSD</li></ul></div><div><h4 class="font-semibold text-text-main">SOP & Aturan</h4><ul class="list-disc list-inside text-sm pl-2 space-y-1"><li>Dilarang membawa makanan dan minuman.</li><li>Jaga kebersihan dan ketenangan.</li></ul></div><button class="show-monitoring-btn w-full bg-primary/10 text-primary font-semibold text-sm py-2.5 rounded-md mt-2 hover:bg-primary/20 transition-colors">Lihat Monitoring Real-time</button></div></div></div></div></div>
    </template>
    <template id="akun-template">
        <div class="p-4 space-y-6"><header class="flex items-center space-x-4"><img src="https://placehold.co/64x64/007AFF/FFFFFF?text=BS" alt="User Avatar" class="w-16 h-16 rounded-full border-2 border-primary/50"><div><h1 class="text-2xl font-bold text-text-main">Budi Santoso</h1><p class="text-text-subtle">1202210001 - Mahasiswa</p></div></header><div class="space-y-4"><div class="bg-surface border border-gray-200 rounded-lg p-4"><h3 class="text-lg font-semibold text-text-main mb-2">Laporan Kendala (CS)</h3><p class="text-sm text-text-subtle mb-3">Ada masalah? Laporkan kepada kami.</p><button id="show-laporan-modal" class="w-full bg-error text-white font-semibold py-2.5 px-4 rounded-md hover:bg-error/90 transition transform hover:scale-105">✨ Laporkan Masalah</button></div><div class="bg-surface border border-gray-200 rounded-lg p-4"><h3 class="text-lg font-semibold text-text-main mb-3">Semua Riwayat Peminjaman</h3><div class="space-y-2 max-h-60 overflow-y-auto pr-2"><div class="flex justify-between items-center text-sm p-3 bg-background rounded-md"><div><p class="font-medium text-text-main">Lab Pemrograman Dasar 1</p><p class="text-xs text-text-subtle">10 Sep 2025</p></div><span class="text-success font-medium">Disetujui</span></div><div class="flex justify-between items-center text-sm p-3 bg-background rounded-md"><div><p class="font-medium text-text-main">Lab Server</p><p class="text-xs text-text-subtle">5 Sep 2025</p></div><span class="text-text-subtle">Selesai</span></div><div class="flex justify-between items-center text-sm p-3 bg-background rounded-md"><div><p class="font-medium text-text-main">Lab Mandiri</p><p class="text-xs text-text-subtle">1 Sep 2025</p></div><span class="text-error font-medium">Ditolak</span></div></div></div><button id="logout-button" class="w-full bg-gray-200 text-text-subtle font-semibold py-2.5 px-4 rounded-md hover:bg-gray-300 transition-colors">Logout</button></div></div>
    </template>
    
    <!-- ======================================================= -->
    <!-- TEMPLATES OPERATOR -->
    <!-- ======================================================= -->
    <template id="dashboard-template">
        <div class="p-4"><header class="mb-6"><h1 class="text-3xl font-bold text-text-main">Dashboard Operator</h1><p class="text-text-subtle">Ringkasan aktivitas laboratorium hari ini.</p></header><div class="grid grid-cols-2 gap-4 mb-6"><div class="bg-primary/10 border border-primary/20 p-4 rounded-lg"><p class="text-sm text-primary">Peminjaman Baru</p><p class="text-3xl font-bold text-text-main">5</p></div><div class="bg-warning/10 border border-warning/20 p-4 rounded-lg"><p class="text-sm text-yellow-800">Menunggu</p><p class="text-3xl font-bold text-text-main">2</p></div><div class="bg-success/10 border border-success/20 p-4 rounded-lg"><p class="text-sm text-success">Aktif</p><p class="text-3xl font-bold text-text-main">8</p></div><div class="bg-error/10 border border-error/20 p-4 rounded-lg"><p class="text-sm text-error">Laporan Masuk</p><p class="text-3xl font-bold text-text-main">3</p></div></div><div class="mb-6"><h3 class="text-lg font-semibold text-text-main mb-3">Aksi Cepat</h3><div class="flex space-x-3"><button id="qa-approve" class="flex-1 bg-success text-white text-sm font-semibold py-2.5 px-3 rounded-md hover:bg-success/90 transition">Approve</button><button id="qa-emergency" class="flex-1 bg-warning text-white text-sm font-semibold py-2.5 px-3 rounded-md hover:bg-warning/90 transition">Darurat</button><button id="qa-ticket" class="flex-1 bg-error text-white text-sm font-semibold py-2.5 px-3 rounded-md hover:bg-error/90 transition">Buat Laporan</button></div></div><div><h3 class="text-lg font-semibold text-text-main mb-3">Grafik Penggunaan Lab (Mingguan)</h3><div class="bg-surface p-4 rounded-lg shadow-sm border border-gray-200"><canvas id="usageChart"></canvas></div></div></div>
    </template>
    <template id="peminjaman-template">
        <div class="p-4"><header class="mb-6"><h1 class="text-3xl font-bold text-text-main">Manajemen Peminjaman</h1><p class="text-text-subtle">Approve, tolak, atau kelola semua peminjaman.</p></header><div class="grid grid-cols-2 gap-3 mb-4"><input type="text" placeholder="Cari nama peminjam..." class="col-span-2 bg-surface border-gray-300 rounded-md text-sm placeholder:text-gray-400 focus:ring-primary focus:border-primary"><select class="bg-surface border-gray-300 rounded-md text-sm focus:ring-primary focus:border-primary"><option>Semua Status</option><option>Pending</option><option>Disetujui</option><option>Ditolak</option></select><input type="date" class="bg-surface border-gray-300 rounded-md text-sm text-text-subtle"></div><div class="space-y-3" id="booking-list"><div class="booking-item bg-surface p-3 rounded-lg border-l-4 border-warning shadow-sm"><div class="flex justify-between items-start"><div><p class="font-bold text-text-main">Budi Santoso <span class="font-normal text-xs text-text-subtle">(1202210001)</span></p><p class="text-sm text-text-subtle">Lab Multimedia | 12 Sep, 10:00-12:00</p></div><span class="text-xs font-medium bg-warning/10 text-yellow-800 px-2 py-1 rounded-full">Pending</span></div><div class="mt-3 pt-3 border-t border-gray-200 flex justify-end space-x-2"><button class="btn-reject bg-error text-white px-3 py-1 text-xs font-semibold rounded hover:bg-error/90 transition">Tolak</button><button class="btn-approve bg-success text-white px-3 py-1 text-xs font-semibold rounded hover:bg-success/90 transition">Setujui</button></div></div></div></div>
    </template>
    <template id="inventaris-template">
        <div class="p-4"><header class="mb-6 flex justify-between items-center"><div><h1 class="text-3xl font-bold text-text-main">Inventaris Lab</h1><p class="text-text-subtle">Kelola semua aset dan perangkat.</p></div><button id="add-inventory-btn" class="bg-primary text-white p-2 rounded-full shadow-lg shadow-primary/20"><i-lucide name="plus" class="w-5 h-5"></i-lucide></button></header><div id="inventory-accordion" class="space-y-3"><div class="bg-surface rounded-lg border border-gray-200"><button class="accordion-header w-full flex justify-between items-center p-4 text-left font-semibold text-text-main"><span>Lab Pemrograman Dasar 1</span><i-lucide name="chevron-down" class="w-5 h-5 transition-transform"></i-lucide></button><div class="accordion-content"><div class="px-4 pb-4 space-y-4 border-t border-gray-200"><h4 class="font-semibold mt-4 text-text-main">Denah Meja & Status</h4><div class="grid grid-cols-5 gap-3"><div class="meja-item aspect-square bg-success rounded-md flex items-center justify-center font-bold text-white cursor-pointer hover:bg-success/90 transition">1</div><div class="meja-item aspect-square bg-success rounded-md flex items-center justify-center font-bold text-white cursor-pointer hover:bg-success/90 transition">2</div><div class="meja-item aspect-square bg-warning rounded-md flex items-center justify-center font-bold text-white cursor-pointer hover:bg-warning/90 transition">3</div><div class="meja-item aspect-square bg-error rounded-md flex items-center justify-center font-bold text-white cursor-pointer hover:bg-error/90 transition">4</div><div class="meja-item aspect-square bg-success rounded-md flex items-center justify-center font-bold text-white cursor-pointer hover:bg-success/90 transition">5</div></div><h4 class="font-semibold pt-4 text-text-main">Daftar Perangkat</h4><div class="table-container overflow-x-auto"><table class="w-full text-sm text-left"><thead class="text-xs text-text-subtle uppercase bg-background"><tr><th class="px-2 py-2">ID</th><th class="px-2 py-2">Tipe</th><th class="px-2 py-2">Status</th><th class="px-2 py-2">Aksi</th></tr></thead><tbody class="text-text-main"><tr class="border-b border-gray-200"><td class="px-2 py-2">PC-001</td><td class="px-2 py-2">PC AIO</td><td class="px-2 py-2"><span class="bg-success/10 text-success text-xs font-medium px-2 py-0.5 rounded-full">OK</span></td><td class="px-2 py-2 flex items-center space-x-2 text-text-subtle"><button class="inventory-action-btn"><i-lucide name="edit-2" class="w-4 h-4"></i-lucide></button><button class="inventory-action-btn"><i-lucide name="trash-2" class="w-4 h-4 text-error"></i-lucide></button></td></tr><tr class="border-b border-gray-200"><td class="px-2 py-2">PC-004</td><td class="px-2 py-2">PC AIO</td><td class="px-2 py-2"><span class="bg-error/10 text-error text-xs font-medium px-2 py-0.5 rounded-full">Rusak</span></td><td class="px-2 py-2 flex items-center space-x-2 text-text-subtle"><button class="inventory-action-btn"><i-lucide name="edit-2" class="w-4 h-4"></i-lucide></button><button class="inventory-action-btn"><i-lucide name="trash-2" class="w-4 h-4 text-error"></i-lucide></button></td></tr></tbody></table></div></div></div></div></div></div>
    </template>
    <template id="laporan-template">
        <div class="p-4"><header class="mb-6 flex justify-between items-center"><div><h1 class="text-3xl font-bold text-text-main">Manajemen Laporan</h1><p class="text-text-subtle">Tinjau semua laporan dari pengguna.</p></div><button id="add-ticket-btn" class="bg-primary text-white p-2 rounded-full shadow-lg shadow-primary/20"><i-lucide name="plus" class="w-5 h-5"></i-lucide></button></header><div class="space-y-3"><div class="report-item cursor-pointer hover:bg-gray-50 bg-surface p-3 rounded-lg border-l-4 border-error transition-colors" data-id="#TKT-001"><p class="font-bold text-sm text-text-main">#TKT-001: Mouse tidak terdeteksi</p><div class="flex justify-between items-center mt-2 text-xs"><span class="text-text-subtle">Prioritas: <span class="font-semibold text-error">Tinggi</span></span><span class="bg-error/10 text-error font-medium px-2 py-1 rounded-full">Open</span></div></div><div class="report-item cursor-pointer hover:bg-gray-50 bg-surface p-3 rounded-lg border-l-4 border-warning transition-colors" data-id="#TKT-002"><p class="font-bold text-sm text-text-main">#TKT-002: Update software Adobe</p><div class="flex justify-between items-center mt-2 text-xs"><span class="text-text-subtle">Prioritas: <span class="font-semibold text-yellow-800">Sedang</span></span><span class="bg-warning/10 text-yellow-800 font-medium px-2 py-1 rounded-full">In Progress</span></div></div></div></div>
    </template>
    <template id="akun-operator-template">
        <div class="p-4"><header class="mb-6 flex items-center space-x-4"><img src="https://placehold.co/64x64/007AFF/FFFFFF?text=A" alt="Operator Avatar" class="w-16 h-16 rounded-full border-2 border-primary/50"><div><h1 class="text-2xl font-bold text-text-main">Admin Operator</h1><p class="text-text-subtle">Akun Administrator Sistem</p></div></header><div class="space-y-4"><div class="bg-surface border border-gray-200 rounded-lg p-4"><h3 class="text-lg font-semibold text-text-main mb-3">Pintasan Manajemen</h3><div class="space-y-2"><button class="management-link w-full text-left p-3 hover:bg-gray-100 rounded-md text-text-main flex items-center transition-colors" data-page="pengguna"><i-lucide name="users" class="w-5 h-5 mr-3 text-primary"></i-lucide>Manajemen Pengguna</button><button class="management-link w-full text-left p-3 hover:bg-gray-100 rounded-md text-text-main flex items-center transition-colors" data-page="laporan-analitik"><i-lucide name="bar-chart-2" class="w-5 h-5 mr-3 text-primary"></i-lucide>Laporan & Analitik</button></div></div><button id="operator-logout-btn" class="w-full bg-gray-200 text-text-subtle font-semibold py-2.5 px-4 rounded-md hover:bg-gray-300 transition-colors">Logout</button></div></div>
    </template>
    
    <!-- ======================================================= -->
    <!-- MODALS -->
    <!-- ======================================================= -->
    <div id="modal-container" class="fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden">
        <div id="modal-content-host" class="bg-surface rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto">
            <!-- Konten modal akan diinjeksi di sini oleh JS -->
        </div>
    </div>

    <template id="modal-pinjam-form">
        <div class="p-5 border-b sticky top-0 bg-surface"><div class="flex justify-between items-center"><h3 class="text-lg font-semibold text-text-main">Form Peminjaman Lab</h3><button class="close-modal-btn text-gray-500 hover:text-gray-800"><i-lucide name="x"></i-lucide></button></div></div>
        <form id="peminjaman-form" class="p-5 space-y-4">
            <div><label class="block text-sm font-medium text-text-subtle">Nama</label><input type="text" value="Budi Santoso" disabled class="mt-1 block w-full bg-gray-100 border-gray-300 rounded-md shadow-sm sm:text-sm text-text-subtle"></div>
            <div><label class="block text-sm font-medium text-text-subtle">NIM</label><input type="text" value="1202210001" disabled class="mt-1 block w-full bg-gray-100 border-gray-300 rounded-md shadow-sm sm:text-sm text-text-subtle"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label class="block text-sm font-medium text-text-subtle">Kelas</label><input type="text" placeholder="Contoh: IF-45-01" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></div>
                <div><label class="block text-sm font-medium text-text-subtle">Angkatan</label><input type="number" placeholder="Contoh: 2021" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></div>
            </div>
            <hr/>
            <div><label class="block text-sm font-medium text-text-subtle">Jenis Lab</label><select class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"><option>Lab Pemrograman Dasar 1</option><option>Lab Multimedia</option><option>Lab Mandiri</option><option>Lab Server</option></select></div>
            <div><label class="block text-sm font-medium text-text-subtle">Tanggal Peminjaman</label><input type="date" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></div>
            <div class="grid grid-cols-2 gap-4">
                <div><label class="block text-sm font-medium text-text-subtle">Waktu Mulai</label><input type="time" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></div>
                <div><label class="block text-sm font-medium text-text-subtle">Waktu Selesai</label><input type="time" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></div>
            </div>
            <div><label class="block text-sm font-medium text-text-subtle">Tujuan Peminjaman</label><textarea rows="3" placeholder="Contoh: Praktikum Basis Data" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></textarea></div>
            <div class="pt-4"><button type="submit" class="w-full bg-primary text-white font-semibold py-2.5 px-4 rounded-md hover:bg-primary/90">Ajukan Peminjaman</button></div>
        </form>
    </template>

    <template id="modal-laporan-form">
        <div class="p-5 border-b"><div class="flex justify-between items-center"><h3 class="text-lg font-semibold text-text-main">✨ Laporan Kendala</h3><button class="close-modal-btn text-gray-500 hover:text-gray-800"><i-lucide name="x"></i-lucide></button></div></div>
        <div class="p-5"><form id="laporan-form"><label class="block text-sm font-medium text-text-subtle">Jelaskan masalah Anda</label><textarea id="laporan-input" rows="4" placeholder="Contoh: Monitor di meja 5 lab multimedia sering mati sendiri..." class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary"></textarea><button type="submit" class="mt-4 w-full bg-primary text-white font-semibold py-2.5 px-4 rounded-md hover:bg-primary/90">Kirim Laporan</button></form></div>
    </template>

    <template id="modal-monitoring">
        <div class="p-5 border-b sticky top-0 bg-surface"><div class="flex justify-between items-center"><div><h3 class="text-lg font-semibold text-text-main">Monitoring Real-time</h3><p id="modal-lab-name" class="text-sm text-text-subtle">Memuat nama lab...</p></div><button class="close-modal-btn text-gray-500 hover:text-gray-800"><i-lucide name="x"></i-lucide></button></div></div>
        <div class="p-5 space-y-4">
            <div>
                <h4 class="font-semibold text-text-main mb-2">Denah Meja Lab</h4>
                <div id="meja-grid-container" class="grid grid-cols-5 gap-3">
                    <!-- Meja akan digenerate oleh JS -->
                </div>
            </div>
            <div id="meja-detail-container" class="hidden pt-2">
                <hr class="mb-4">
                <h4 class="font-semibold text-text-main mb-2">Detail Perangkat</h4>
                <div class="bg-background p-3 rounded-lg text-sm space-y-2">
                    <div class="flex justify-between"><span class="text-text-subtle">ID PC</span><strong id="detail-pc-id" class="text-text-main"></strong></div>
                    <div class="flex justify-between"><span class="text-text-subtle">Status</span><strong id="detail-status"></strong></div>
                    <div class="flex justify-between"><span class="text-text-subtle">Detail</span><p id="detail-info" class="text-text-main text-right"></p></div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="modal-alasan-batal">
        <div class="p-5 border-b"><div class="flex justify-between items-center"><h3 class="text-lg font-semibold text-text-main">Konfirmasi Pembatalan</h3><button class="close-modal-btn text-gray-500 hover:text-gray-800"><i-lucide name="x"></i-lucide></button></div></div>
        <form id="form-alasan-batal" class="p-5"><label for="alasan-batal" class="block text-sm font-medium text-text-subtle">Mohon berikan alasan pembatalan jadwal</label><textarea id="alasan-batal" rows="4" placeholder="Contoh: Dosen berhalangan hadir..." class="mt-1 block w-full border-gray-300 rounded-md shadow-sm sm:text-sm focus:ring-primary focus:border-primary" required></textarea><button type="submit" class="mt-4 w-full bg-error text-white font-semibold py-2.5 px-4 rounded-md hover:bg-error/90">Batalkan Jadwal</button></form>
    </template>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // === STATE & SELECTORS ===
            const app = document.getElementById('app');
            const mainContentContainer = document.getElementById('main-content');
            const operatorContentContainer = document.getElementById('operator-content');
            const modalContainer = document.getElementById('modal-container');
            const modalContentHost = document.getElementById('modal-content-host');
            let dataToProcess = {}; // Temporary state for processing
            const currentUser = { matkul: "Algoritma & Pemrograman Dasar", hari: "Senin" }; // Simulasi user yang login

            // === MOCK DATA ===
            let mockJadwalData = { "Lab Pemrograman Dasar 1": { "Senin": [{ id: 1, matkul: "Algoritma & Pemrograman Dasar", dosen: "Dr. Retno", kelas: "IF-45-01", keperluan: "Mata Kuliah - Praktikum", mulai: "08:00", selesai: "10:00", status: 'terjadwal' }], "Selasa": [{ id: 2, matkul: "Basis Data Lanjutan", dosen: "Prof. Budi", kelas: "IF-45-02", keperluan: "Mata Kuliah - Praktikum", mulai: "13:00", selesai: "15:00", status: 'terjadwal' }], "Rabu": [], "Kamis": [], "Jumat": [] }, "Lab Multimedia": { "Senin": [], "Selasa": [], "Rabu": [], "Kamis": [], "Jumat": [] }, "Lab Mandiri": { "Senin": [], "Selasa": [], "Rabu": [], "Kamis": [], "Jumat": [] }, "Lab Server": { "Senin": [], "Selasa": [], "Rabu": [], "Kamis": [], "Jumat": [] } };
            const labMonitoringData = { "Lab Pemrograman Dasar 1": Array.from({ length: 10 }, (_, i) => ({ id: `PD-${String(i + 1).padStart(2, '0')}`, status: (i === 4 || i === 8) ? 'Rusak' : 'OK', details: (i === 4) ? 'Mouse tidak terdeteksi.' : (i === 8 ? 'Layar bergaris.' : 'Semua perangkat berfungsi.') })), "Default Lab": Array.from({ length: 8 }, (_, i) => ({ id: `DEF-${String(i + 1).padStart(2, '0')}`, status: i === 6 ? 'Rusak' : 'OK', details: i === 6 ? 'Koneksi internet lambat.' : 'Semua perangkat berfungsi.' })) };

            // === UTILITY FUNCTIONS ===
            const initLucideIcons = () => { if (window.lucide) { lucide.createIcons(); } else { setTimeout(initLucideIcons, 100); } };
            const showView = (viewId) => { document.querySelectorAll('.view').forEach(view => view.classList.remove('active')); document.getElementById(viewId)?.classList.add('active'); };
            const showNotification = (message, type = 'success') => { const banner = document.getElementById('notification-banner'); const colors = { success: 'bg-success', error: 'bg-error', warning: 'bg-warning' }; banner.querySelector('span').textContent = message; banner.className = `fixed top-5 left-1/2 z-[999] text-white py-2 px-5 rounded-lg shadow-xl transition-transform duration-300 ${colors[type]}`; banner.style.display = 'block'; setTimeout(() => banner.style.display = 'none', 3000); };
            const showModal = (templateId) => { const template = document.getElementById(templateId); if (template) { modalContentHost.innerHTML = template.innerHTML; initLucideIcons(); modalContainer.classList.remove('hidden'); } };
            const hideModal = () => { modalContainer.classList.add('hidden'); modalContentHost.innerHTML = ''; };

            // === RENDER FUNCTIONS ===
            const renderBerandaReminder = () => { const container = document.getElementById('jadwal-hari-ini-container'); let foundJadwal = false; container.innerHTML = ''; Object.keys(mockJadwalData).forEach(lab => { const jadwalHariIni = mockJadwalData[lab][currentUser.hari]?.find(j => j.matkul === currentUser.matkul); if (jadwalHariIni) { foundJadwal = true; let statusHTML = ''; if (jadwalHariIni.status === 'terjadwal') { statusHTML = `<div class="flex space-x-2"><button class="btn-cancel-booking p-2 bg-error/20 text-error rounded-full hover:bg-error/30" data-id="${jadwalHariIni.id}" data-lab="${lab}" data-day="${currentUser.hari}"><i-lucide name="x" class="w-5 h-5"></i-lucide></button><button class="btn-confirm-booking p-2 bg-success/20 text-success rounded-full hover:bg-success/30" data-id="${jadwalHariIni.id}" data-lab="${lab}" data-day="${currentUser.hari}"><i-lucide name="check" class="w-5 h-5"></i-lucide></button></div>`; } else if (jadwalHariIni.status === 'dikonfirmasi') { statusHTML = `<div class="text-sm font-semibold text-success flex items-center"><i-lucide name="check-circle-2" class="w-4 h-4 mr-1"></i-lucide> Dikonfirmasi</div>`; } container.innerHTML += `<div class="bg-surface p-4 rounded-lg flex justify-between items-center shadow-sm border border-gray-200"><div><p class="font-bold text-text-main">${jadwalHariIni.matkul}</p><p class="text-sm text-text-subtle">${lab}</p><p class="text-sm font-semibold text-primary mt-2">${jadwalHariIni.mulai} - ${jadwalHariIni.selesai}</p></div>${statusHTML}</div>`; } }); if (!foundJadwal) { container.innerHTML = `<div class="text-center text-text-subtle py-4"><p>Tidak ada jadwal untuk kelas Anda hari ini.</p></div>`; } initLucideIcons(); };
            const renderUserJadwal = () => { const lab = document.getElementById('lab-choice-user').value; const day = document.querySelector('#day-filter-container-user .filter-day.active').dataset.day; const container = document.getElementById('schedule-timeline'); document.getElementById('schedule-day-title').textContent = day; const jadwal = mockJadwalData[lab]?.[day] || []; if (jadwal.length === 0) { container.innerHTML = `<div class="text-center text-text-subtle p-8"><i-lucide name="calendar-off" class="mx-auto w-12 h-12 mb-2"></i-lucide><p>Tidak ada jadwal untuk hari ini.</p></div>`; } else { container.innerHTML = jadwal.map(j => { if (j.status === 'dibatalkan') { return `<button id="show-pinjam-form" class="w-full text-left bg-success/10 p-4 rounded-lg flex space-x-4 hover:bg-success/20 transition-colors"><div class="w-1 bg-success rounded-full"></div><div><p class="font-bold text-success text-lg">${j.mulai} - ${j.selesai}</p><p class="text-text-main mt-1">Jam Kosong & Dapat Dipesan</p><p class="text-sm text-text-subtle">Kesempatan untuk menggunakan lab.</p></div></button>`; } else { return `<div class="bg-surface p-4 rounded-lg flex space-x-4 shadow-sm border border-gray-200"><div class="w-1 bg-primary rounded-full"></div><div><p class="font-bold text-primary text-lg">${j.mulai} - ${j.selesai}</p><p class="text-text-main mt-1"><span class="font-semibold">Kelas:</span> ${j.kelas}</p><p class="text-sm text-text-subtle"><span class="font-semibold">Keperluan:</span> ${j.keperluan}</p></div></div>`; } }).join(''); } initLucideIcons(); };
            
            const loadContent = (templateId, container) => { const template = document.getElementById(templateId); if (template) { container.innerHTML = template.innerHTML; initLucideIcons(); if(templateId === 'dashboard-template') initDashboardChart(); else if (templateId === 'jadwal-template') renderUserJadwal(); else if (templateId === 'beranda-template') renderBerandaReminder(); } };
            const handleLogout = () => { showView('login-view'); document.querySelectorAll('.bottom-nav-item, .operator-nav-item').forEach(i => i.classList.remove('active')); document.querySelector('.bottom-nav-item[href="#beranda"]')?.classList.add('active'); document.querySelector('.operator-nav-item[href="#dashboard"]')?.classList.add('active'); };
            const populateMonitoringModal = (labName) => { const data = labMonitoringData[labName] || labMonitoringData["Default Lab"]; const gridContainer = modalContentHost.querySelector('#meja-grid-container'); if (!gridContainer) return; gridContainer.innerHTML = data.map((meja, index) => `<div class="meja-item aspect-square rounded-md flex items-center justify-center font-bold text-white cursor-pointer transition-all ring-offset-2 ring-offset-surface ${meja.status === 'OK' ? 'bg-success hover:bg-success/90' : 'bg-error hover:bg-error/90'}" data-id="${meja.id}" data-status="${meja.status}" data-details="${meja.details}">${index + 1}</div>`).join(''); };
            const initDashboardChart = () => { const ctx = document.getElementById('usageChart')?.getContext('2d'); if (ctx) { new Chart(ctx, { type: 'bar', data: { labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab'], datasets: [{ label: 'Jam Penggunaan', data: [12, 19, 15, 22, 18, 10], backgroundColor: 'rgba(0, 122, 255, 0.2)', borderColor: 'rgba(0, 122, 255, 1)', borderWidth: 1 }] }, options: { scales: { y: { beginAtZero: true, grid: { color: 'rgba(0,0,0,0.05)' }, ticks: { color: '#6C757D' } }, x: { grid: { display: false }, ticks: { color: '#6C757D' } } }, plugins: { legend: { display: false } } } }); } };

            // === GLOBAL EVENT LISTENERS ===
            app.addEventListener('click', (e) => {
                const target = e.target.closest('button, a');
                if (!target) return;

                if (target.id === 'logout-button' || target.id === 'operator-logout-btn') { handleLogout(); }
                else if (target.id === 'show-pinjam-form') { showModal('modal-pinjam-form'); } 
                else if (target.id === 'show-laporan-modal') { showModal('modal-laporan-form'); }
                else if (target.classList.contains('show-monitoring-btn')) { const labName = target.closest('.bg-surface').querySelector('.accordion-header span').textContent; showModal('modal-monitoring'); modalContentHost.querySelector('#modal-lab-name').textContent = labName; populateMonitoringModal(labName); }
                else if (target.classList.contains('accordion-header')) { const content = target.nextElementSibling; const icon = target.querySelector('i-lucide'); const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px'; content.style.maxHeight = isExpanded ? '0px' : content.scrollHeight + "px"; icon.style.transform = isExpanded ? 'rotate(0deg)' : 'rotate(180deg)'; }
                else if (target.classList.contains('filter-day')) { const parent = target.parentElement; parent.querySelectorAll('.filter-day').forEach(btn => btn.classList.remove('active')); target.classList.add('active'); if (parent.id.includes('user')) renderUserJadwal(); }
                else if(target.classList.contains('btn-approve')) { const item = target.closest('.booking-item'); item.style.transition = 'opacity 0.5s'; item.style.opacity = '0'; setTimeout(() => item.remove(), 500); showNotification('Peminjaman disetujui.', 'success'); }
                else if(target.classList.contains('btn-reject')) { alert('Buka modal alasan penolakan.'); }
                else if (target.classList.contains('btn-confirm-booking')) {
                    const { id, lab, day } = target.dataset;
                    const jadwal = mockJadwalData[lab][day].find(j => j.id == id);
                    if (jadwal) { jadwal.status = 'dikonfirmasi'; showNotification('Jadwal berhasil dikonfirmasi!', 'success'); renderBerandaReminder(); }
                }
                else if (target.classList.contains('btn-cancel-booking')) {
                    dataToProcess = target.dataset;
                    showModal('modal-alasan-batal');
                }
            });
            
            app.addEventListener('change', (e) => { if (e.target.id === 'lab-choice-user') renderUserJadwal(); });

            modalContainer.addEventListener('click', (e) => {
                if (e.target === modalContainer || e.target.closest('.close-modal-btn')) { hideModal(); } 
                else if (e.target.closest('.meja-item')) { const meja = e.target.closest('.meja-item'); modalContentHost.querySelectorAll('.meja-item').forEach(m => m.classList.remove('ring-4', 'ring-primary')); meja.classList.add('ring-4', 'ring-primary'); const detailContainer = modalContentHost.querySelector('#meja-detail-container'); const statusEl = modalContentHost.querySelector('#detail-status'); modalContentHost.querySelector('#detail-pc-id').textContent = meja.dataset.id; statusEl.textContent = meja.dataset.status; statusEl.className = meja.dataset.status === 'OK' ? 'font-bold text-success' : 'font-bold text-error'; modalContentHost.querySelector('#detail-info').textContent = meja.dataset.details; detailContainer.classList.remove('hidden'); } 
            });

            modalContainer.addEventListener('submit', (e) => {
                e.preventDefault();
                if (e.target.id === 'peminjaman-form') { hideModal(); showNotification('Peminjaman berhasil diajukan.', 'success'); } 
                else if (e.target.id === 'laporan-form') { hideModal(); showNotification('Laporan berhasil dikirim.', 'success'); }
                else if (e.target.id === 'form-alasan-batal') {
                    const { id, lab, day } = dataToProcess;
                    const jadwal = mockJadwalData[lab][day].find(j => j.id == id);
                    if (jadwal) { jadwal.status = 'dibatalkan'; hideModal(); showNotification('Jadwal telah dibatalkan.', 'error'); renderBerandaReminder(); }
                }
            });

            // === INITIAL SETUP & STATIC LISTENERS ===
            document.getElementById('login-form').addEventListener('submit', (e) => { e.preventDefault(); const userType = document.getElementById('login-user-type').value; if (userType === 'Operator') { showView('operator-view'); loadContent('dashboard-template', operatorContentContainer); } else { showView('main-app-view'); loadContent('beranda-template', mainContentContainer); } });
            document.getElementById('register-form').addEventListener('submit', (e) => { e.preventDefault(); const successMsg = document.getElementById('success-message'); successMsg.textContent = 'Registrasi berhasil! Silakan login.'; successMsg.classList.remove('hidden'); setTimeout(() => { successMsg.classList.add('hidden'); showView('login-view'); }, 2000); });
            document.getElementById('go-to-register').addEventListener('click', (e) => { e.preventDefault(); showView('register-view'); });
            document.getElementById('go-to-login').addEventListener('click', (e) => { e.preventDefault(); showView('login-view'); });
            
            document.querySelectorAll('.bottom-nav-item').forEach(item => { item.addEventListener('click', function(e) { e.preventDefault(); document.querySelectorAll('.bottom-nav-item').forEach(i => i.classList.remove('active')); this.classList.add('active'); const targetPage = this.getAttribute('href').substring(1); loadContent(`${targetPage}-template`, mainContentContainer); }); });
            document.querySelectorAll('.operator-nav-item').forEach(item => { item.addEventListener('click', function(e) { e.preventDefault(); document.querySelectorAll('.operator-nav-item').forEach(i => i.classList.remove('active')); this.classList.add('active'); const targetPage = this.getAttribute('href').substring(1); loadContent(`${targetPage}-template`, operatorContentContainer); }); });

            // --- INITIALIZATION ---
            initLucideIcons();
            showView('login-view');
        });
    </script>
</body>
</html>

